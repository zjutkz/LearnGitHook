//公共函数
apply from: "${project.rootProject.file('common_function.gradle')}"
apply plugin: 'android.maven'

apply plugin: 'com.android.library'
apply plugin: 'aspectj-javac-plugin'
apply plugin: 'serializable-injector-javac'
injectorConfig {
    packageName = "com/vdian/tuwen"
    packagePattern = "/model/"
}

// dimens 插件
apply plugin: 'org.voiddog.gradle.DimensPlugin'
// 配置自动生成 dimens
dimensConfig {
    input = 'values/dimens.xml'
    output = ['values-hdpi/dimens.xml':0.8, 'values-xhdpi/dimens.xml':1]
}

android {
    compileSdkVersion COMPILE_SDK_VERSION as Integer
    buildToolsVersion BUILD_TOOLS_VERSION

    defaultConfig {
        minSdkVersion MIN_SDK_VERION
        targetSdkVersion TARGET_SDK_VERSION
        versionCode AAR_VERSION_CODE as Integer
        versionName AAR_VERSION_NAME
        vectorDrawables.useSupportLibrary = true
        consumerProguardFiles 'proguard-rules.pro'
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
    }
    signingConfigs {
        release {
            v2SigningEnabled false
            storeFile file("release.keystore")
            storePassword sign_storePwd
            keyAlias key_alias
            keyPassword sign_keyPwd
        }
    }
    lintOptions {
        abortOnError false
    }
    dexOptions {
        javaMaxHeapSize "4g"
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    resourcePrefix "luc_"
}

dependencies {
    // Required for local unit tests (JUnit 4 framework)
    testImplementation 'junit:junit:4.12'

    // Required for instrumented tests
    androidTestImplementation "com.android.support:support-annotations:${SUPPORT_VERSION}"
    androidTestImplementation 'com.android.support.test:runner:1.0.1'

    api fileTree(include: ['*.jar'], dir: 'libs')

    // support library
    api "com.android.support:appcompat-v7:${SUPPORT_VERSION}"
    api "com.android.support:recyclerview-v7:${SUPPORT_VERSION}"
    api "com.android.support:cardview-v7:${SUPPORT_VERSION}"
    api "com.android.support:design:${SUPPORT_VERSION}"
    api "com.android.support:support-dynamic-animation:${SUPPORT_VERSION}"

    api 'com.android.support.constraint:constraint-layout:1.0.2'
    api 'com.code-troopers.betterpickers:library:3.1.0'
    api "com.google.zxing:core:3.1.0"
    api 'com.afollestad.material-dialogs:commons:0.9.4.7'
    api 'com.jakewharton.rxbinding2:rxbinding:2.0.0'

    // event bus
    api 'org.greenrobot:eventbus:3.0.0'
    api 'io.reactivex.rxjava2:rxandroid:2.0.1'
    api 'io.reactivex.rxjava2:rxjava:2.1.0'

    // life cycle architecture
    api ('android.arch.lifecycle:runtime:1.0.0')
    api ('android.arch.lifecycle:extensions:1.0.0')
    annotationProcessor 'android.arch.lifecycle:compiler:1.0.0'

    // 弹簧库
    api 'com.facebook.rebound:rebound:0.3.8'
    // 分割线
    api 'com.yqritc:recyclerview-flexibledivider:1.4.0'
    //fastjson
    api ("com.alibaba:fastjson:${FAST_JSON_VERSION}"){
        force = true
    }
    // valyout
    api('com.alibaba.android:vlayout:1.0.9@aar') {
        transitive = true
    }
    //**********************************************************************************************
    //以下为微店lib
    //compat
    api 'com.koudai.compat:KDCompat:0.2.7.2'
    api('com.koudai.compat:KDCompat-Permission:0.1.1')
    // 配置中心
    api('com.weidian.configcenter:ConfigCenter:0.1.3-SNAPSHOT') {
        exclude module: 'support-v4'
        exclude module: 'network-vap'
        exclude module: 'KDCompat'
        exclude module: 'sharemodule'
    }
    // 图片库
    api ('com.weidian.android.lib.wdimagecenter:WdImageCenter:0.7.0'){
        exclude module: 'support-v4'
        exclude module: 'httpdns'
        exclude module: 'okhttp'
        exclude module: 'sharemodule'
    }
    // UIKIT
    api 'com.vdian.android.lib:wdui:0.3.7'

    api('com.vdian.android.lib:ut:0.3.0.view') {
        exclude module: 'support-v4'
        exclude module: 'android'
        exclude module: 'sharemodule'
    }

    //vap
    api("com.koudai.android.lib:network-vap:${VAP_VERSION}") {
        exclude module: 'httpdns'
    }
    api "com.koudai.android.lib:network-vap-ut-support:${VAP_VERSION}"
    api "com.koudai.android.lib:network-vap-httpdns-support:${VAP_VERSION}"
    api "com.koudai.android.lib:network-vap-login-support:${VAP_VERSION}"
    //httpdns
    api ("com.koudai.android.lib:httpdns:1.0.3"){
        exclude module: 'fastjson'
    }

    //图片上传
    api 'com.vdian.android.lib:upload:0.1.9'

    //统一登录
    api('com.vdian.android.lib:vlogin-ui:1.1.98-NOLOG') {
        exclude module: 'network-vap'
        exclude module: 'ut'
        exclude group: 'com.tencent'
        exclude module: 'safe'
        exclude module: 'KDCompat'
        exclude module: 'network-vap-login-support'
        changing = true
        force = true
    }

    //用户反馈
    api('com.vdian.android.lib:feedback:0.1.7') {
        exclude module: 'network-vap'
        exclude module: 'WdImageCenter'
        exclude module: 'sharemodule'
    }

    //缓存
    api 'com.vdian.android.lib:WDCache:0.1.7'

    // VDTrick
    api('com.vdian.android.lib:VDTrick:0.1.10') {
        exclude module: 'WDJSBridge'
        exclude module: 'appcompat-v7'
    }

    //分享
    api('com.weidian.android.lib.sharemodule:sharemodule:0.5.3') {
        changing = true
        exclude group: 'com.android.support'
        exclude group: 'com.tencent'
    }

    //音乐选择
    api('com.vdian.android.lib.vdmusicplayer:VDMusicPlayer:1.0.0') {
        exclude module: 'wdimagecenter'
        exclude module: 'KDCompat'
        exclude module: 'network-vap'
        exclude module: 'recyclerview-v7'
    }

    //视频配置
    api('com.vdian.android.lib:VDPlayer:0.0.9') {
        exclude group: 'com.android.support'
        exclude module: 'sharemodule'
    }

    // JSBridge,杭州
    api("com.koudai.jsbridge:WDJSBridge:0.9.2") {
        exclude group: 'com.android.support'
        exclude module: 'sharemodule'
        exclude module: 'KDCompat'
        exclude module: 'ut'
        exclude module: 'WdImageCenter'
        exclude module: 'ConfigCenter'
        exclude module: 'upload'
        exclude module: 'network-vap'
        exclude module: 'reporter'
        force = true
    }
    api("com.koudai.jsbridge:phoenix:0.1.10") {
        exclude module: 'KDCompat'
        exclude module: 'appcompat-v7'
        exclude module: 'ConfigCenter'
        exclude module: 'ut'
        exclude module: 'sharemodule'
    }
    // 加密存储库
    api 'com.koudai.android.lib:storage-secure:0.1.0'

    api 'com.tencent:mm-sdk:3.0.0'
    api 'com.tencent:open-sdk:3.1.0'
}

apply from: "${project.rootProject.file('upload_aar.gradle')}"
